---
- name: install npm
  hosts: dev-dashboard

  tasks:

  - name: Install packages based on package.json.
    shell: cd /home/ops/rp-dashboard && npm install

  - name: run build
    shell: cd /home/ops/rp-dashboard && npm run build:demo-kimlic-com

  - name: start npm
    supervisorctl:
      name: npm
      state: stopped

  - name: change permission on rp-dashboard folder
    file:
      path: /home/ops/rp-dashboard
      owner: ops
      group: ops
      mode: 0755
      recurse: yes 
