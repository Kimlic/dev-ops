---
# tasks file for docker_setup
    - name: Install packages to allow apt to use a repository over HTTPS
      apt: 
          name: "{{ item }}"
          state: present
          update_cache: yes
      with_items:
        - apt-transport-https
        - ca-certificates
        - curl
        - software-properties-common
      
    - name: add docker key
      apt_key:
        id: 0EBFCD88
        url: https://download.docker.com/linux/ubuntu/gpg 
        state: present

    - name: add docker repository into sources list
      apt_repository:
        repo: deb [arch=amd64] https://download.docker.com/linux/ubuntu xenial stable
        state: present

    - name: install docker ce
      apt: 
        name: docker-ce
        state: present
        update_cache: yes
  
    - name: add permission
      shell: "usermod -a -G docker lesha"
      become: yes